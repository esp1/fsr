<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>esp1.fsr.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">fsr</span> <span class="project-version">main</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>esp1</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fsr</span></div></div></li><li class="depth-3 branch"><a href="esp1.fsr.cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cache</span></div></a></li><li class="depth-3 branch"><a href="esp1.fsr.compile.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compile</span></div></a></li><li class="depth-3 branch current"><a href="esp1.fsr.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="esp1.fsr.ring.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ring</span></div></a></li><li class="depth-3"><a href="esp1.fsr.runtime.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>runtime</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="esp1.fsr.core.html#var-clear-route-cache.21"><div class="inner"><span>clear-route-cache!</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-clj-.3Ens-sym"><div class="inner"><span>clj-&gt;ns-sym</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-clojure-file-ext"><div class="inner"><span>clojure-file-ext</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-file-.3Eclj"><div class="inner"><span>file-&gt;clj</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-file-ns-name-components"><div class="inner"><span>file-ns-name-components</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-get-root-ns-prefix"><div class="inner"><span>get-root-ns-prefix</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-http-endpoint-fn"><div class="inner"><span>http-endpoint-fn</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-ns-endpoint-meta"><div class="inner"><span>ns-endpoint-meta</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-ns-sym-.3Euri"><div class="inner"><span>ns-sym-&gt;uri</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-resolve-sym"><div class="inner"><span>resolve-sym</span></div></a></li><li class="depth-1"><a href="esp1.fsr.core.html#var-uri-.3Efile.2Bparams"><div class="inner"><span>uri-&gt;file+params</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">esp1.fsr.core</h1><div class="doc"><div class="markdown"><p>Core URI-to-file resolution for filesystem routing.</p>
<p>Maps request URIs to Clojure namespace files via filesystem traversal. Zero external dependencies.</p>
<h2><a href="#namespace-filename-conventions" id="namespace-filename-conventions"></a>Namespace ↔ Filename Conventions</h2>
<ul>
<li>Namespace <code>-</code> → filename <code>_</code> (e.g., <code>my-app</code> → <code>my_app</code>)</li>
<li>Namespace <code>.</code> → directory <code>/</code> (e.g., <code>my-app.routes</code> → <code>my_app/routes/</code>)</li>
<li>Example: <code>my-app.user.&lt;id&gt;</code> → <code>my_app/user/&lt;id&gt;.clj</code></li>
</ul>
<h2><a href="#path-parameters" id="path-parameters"></a>Path Parameters</h2>
<ul>
<li><code>&lt;param&gt;</code> matches segments without slashes (e.g., <code>&lt;id&gt;</code> matches <code>123</code>)</li>
<li><code>&lt;&lt;param&gt;&gt;</code> matches segments with slashes (e.g., <code>&lt;&lt;path&gt;&gt;</code> matches <code>foo/bar/baz</code>)</li>
</ul>
<h2><a href="#key-functions" id="key-functions"></a>Key Functions</h2>
<ul>
<li><code>uri-&gt;file+params</code> - Resolve URI to file with path parameters</li>
<li><code>http-endpoint-fn</code> - Get handler for HTTP method with <code>:endpoint/type</code> delegation</li>
<li><code>ns-endpoint-meta</code> - Get namespace metadata with <code>:endpoint/ns</code> key</li>
</ul>
<h2><a href="#performance" id="performance"></a>Performance</h2>
<p>Resolution is O(URI segments) in filesystem calls, mitigated by caching (see <code>esp1.fsr.cache</code>).</p>
</div></div><div class="public anchor" id="var-clear-route-cache.21"><h3>clear-route-cache!</h3><div class="usage"><code>(clear-route-cache!)</code></div><div class="doc"><div class="markdown"><p>Clear the route cache - useful for development mode with hot reloading. Delegates to the cache module. Returns the number of entries cleared.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L33">view source</a></div></div><div class="public anchor" id="var-clj-.3Ens-sym"><h3>clj-&gt;ns-sym</h3><div class="usage"><code>(clj-&gt;ns-sym maybe-clj-file)</code></div><div class="doc"><div class="markdown"><p>Returns the namespace name symbol for the clojure file.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L244">view source</a></div></div><div class="public anchor" id="var-clojure-file-ext"><h3>clojure-file-ext</h3><div class="usage"><code>(clojure-file-ext file-or-filename)</code></div><div class="doc"><div class="markdown"><p>Returns the extension of the given file or filename if it is .clj or .cljc. Otherwise returns nil.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L41">view source</a></div></div><div class="public anchor" id="var-file-.3Eclj"><h3>file-&gt;clj</h3><div class="usage"><code>(file-&gt;clj f)</code></div><div class="doc"><div class="markdown"><p>Given a file that is part of a clojure namespace, returns the File for the .clj or .cljc file that defines that namespace. Otherwise returns nil.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L218">view source</a></div></div><div class="public anchor" id="var-file-ns-name-components"><h3>file-ns-name-components</h3><div class="usage"><code>(file-ns-name-components f)</code></div><div class="doc"><div class="markdown"><p>If this file is part of a clojure namespace, returns a vector of the namespace name components associated with this file. If this file is not part of a clojure namespace, returns nil.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L53">view source</a></div></div><div class="public anchor" id="var-get-root-ns-prefix"><h3>get-root-ns-prefix</h3><div class="usage"><code>(get-root-ns-prefix root-fs-path)</code></div><div class="doc"><div class="markdown"><p>Given a root filesystem path, returns the associated root namespace prefix string. It does this by scanning the root fileystem path for a clojure file, and returning the portion of the namepace corresponding to the filesystem path.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L69">view source</a></div></div><div class="public anchor" id="var-http-endpoint-fn"><h3>http-endpoint-fn</h3><div class="usage"><code>(http-endpoint-fn method endpoint-meta)</code></div><div class="doc"><div class="markdown"><p>Returns the handler var for the given HTTP method and endpoint metadata. If no function is found in :endpoint/http, recursively delegates to :endpoint/type. If no function is found, returns nil.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L304">view source</a></div></div><div class="public anchor" id="var-ns-endpoint-meta"><h3>ns-endpoint-meta</h3><div class="usage"><code>(ns-endpoint-meta maybe-ns-sym)</code></div><div class="doc"><div class="markdown"><p>Returns the metadata map of the namespace symbol, enhanced with endpoint/ns key, along with any other metadata associated with the namespace.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L277">view source</a></div></div><div class="public anchor" id="var-ns-sym-.3Euri"><h3>ns-sym-&gt;uri</h3><div class="usage"><code>(ns-sym-&gt;uri maybe-ns-sym)</code><code>(ns-sym-&gt;uri maybe-ns-sym root-ns-prefix)</code></div><div class="doc"><div class="markdown"><p>Returns the URI associated with the namespace symbol. If a namespace prefix is provided, it will be stripped from the URI.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L255">view source</a></div></div><div class="public anchor" id="var-resolve-sym"><h3>resolve-sym</h3><div class="usage"><code>(resolve-sym s default-ns)</code></div><div class="doc"><div class="markdown"><p>Requires and resolves the symbol to a var. If the given symbol is not namespaced, the default namespace is used to resolve the symbol.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L289">view source</a></div></div><div class="public anchor" id="var-uri-.3Efile.2Bparams"><h3>uri-&gt;file+params</h3><div class="usage"><code>(uri-&gt;file+params uri cwd)</code></div><div class="doc"><div class="markdown"><p>Resolves the given URI to a filesystem file or dir in the given current working directory. If a matching filesystem file or dir is found, returns a vector 2-tuple of the matched file/dir, and a map of matched path parameters. If no matching filesystem file or dir is found, returns nil.</p>
<p>URIs are normalized by stripping leading and trailing slashes before resolution. This allows the function to accept URIs in their natural form (e.g., from Ring requests) which typically include leading slashes (e.g., “/foo/bar” or “foo/bar” both work).</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/core.clj#L191">view source</a></div></div></div></body></html>