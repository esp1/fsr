<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>esp1.fsr.ring documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">fsr</span> <span class="project-version">main</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>esp1</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fsr</span></div></div></li><li class="depth-3 branch"><a href="esp1.fsr.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch current"><a href="esp1.fsr.ring.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ring</span></div></a></li><li class="depth-3"><a href="esp1.fsr.static.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>static</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="esp1.fsr.ring.html#var-uri-.3Eendpoint-fn"><div class="inner"><span>uri-&gt;endpoint-fn</span></div></a></li><li class="depth-1"><a href="esp1.fsr.ring.html#var-wrap-fs-router"><div class="inner"><span>wrap-fs-router</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">esp1.fsr.ring</h1><div class="doc"><div class="markdown"><p>Provides a <code>wrap-fs-router</code> <a href="https://github.com/ring-clojure/ring/wiki/Concepts#middleware">Ring middleware</a> function that resolves routes from Clojure namespaces and functions in the filesystem.</p>
</div></div><div class="public anchor" id="var-uri-.3Eendpoint-fn"><h3>uri-&gt;endpoint-fn</h3><div class="usage"><code>(uri-&gt;endpoint-fn method uri root-fs-path)</code></div><div class="doc"><div class="markdown"><p>Returns a Ring handler function for the given HTTP method and URI endpoint by searching for a Clojure namespace under the given root filesystem path.</p>
<p>The namespace should have a metadata map with a <code>:endpoint/http</code> key or a <code>:endpoint/type</code> key.</p>
<p>The <code>:endpoint/http</code> value should be a map of lowercase keywordized HTTP method names (e.g. <code>:get</code>, <code>:post</code>) to handler function symbols, e.g.:</p>
<pre><code>(ns my-app.routes.index
  {:endpoint/http {:get 'show-create-new-thing-page-endpoint
                   :post 'create-new-thing-endpoint}})
</code></pre>
<p>If no matching function symbol is found in the <code>:endpoint/http</code> map for the given HTTP method, will look for a <code>:endpoint/type</code> key whose value is a symbol of another namespace in which to recursively look for a <code>:endpoint/http</code> or <code>:endpoint/type</code> key and a matching endpoint function.</p>
<p>If no appropriate handler function can be found in the filesystem, returns nil.</p>
<p>If an endpoint handler function is found, it will be augmented so that the Ring request map passed as an argument to the function when it is invoked will have the metadata map of the namespace matching the URI merged into it, and also contain a <code>:endpoint/ns</code> key whose value is the symbol for the namespace matching the URI.</p>
<p>If the handler namespace name contains path parameters, the request map will contain an additional <code>:endpoint/path-params</code> key whose value maps the string parameter names to their values in the request URI.</p>
<p>Path parameters in URIs are designated by surrounding the parameter name with single angle brackets <code>&lt;</code> <code>&gt;</code> to match a parameter value that does not contain a slash <code>/</code> character, or double angle brackets <code>&lt;&lt;</code> <code>&gt;&gt;</code> to match a parameter value that may contain a slash <code>/</code> character.</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/ring.clj#L11">view source</a></div></div><div class="public anchor" id="var-wrap-fs-router"><h3>wrap-fs-router</h3><div class="usage"><code>(wrap-fs-router handler root-fs-path)</code></div><div class="doc"><div class="markdown"><p>Ring middleware that wraps the provided handler and adds the ability to respond to requests with handler functions found under the given root filesystem path via <code>uri-&gt;endpoint-fn</code>. The handler function is expected to return either: - a Ring response map - a string, which fsr will use as the body of an HTTP 200 Ok response - nil, which fsr will translate into an HTTP 204 No Content response</p>
</div></div><div class="src-link"><a href="https://github.com/esp1/fsr/blob/main/src/esp1/fsr/ring.clj#L57">view source</a></div></div></div></body></html>